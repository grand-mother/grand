name: Tests
on:
  push:
    paths-ignore:
    - docs/requirements.txt
    - examples/**
    - .github/workflows/appimage.yml

jobs:
  Linux:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v2
    - uses: actions/checkout@v2
      with:
        repository: numpy/numpy-stubs
        ref: 2c8d8f26adb1eef54571ccc85ef8ad4f2fb90c4c
        path: tmp/numpy-stubs

    - name: Initialise the environment
      env:
        USER_GIT: ${{github.actor}}
      run: |        
         . env/setup.sh
         python -m pip install -r quality/requirements.txt

     - name: SonarQube update 
       run: |
         . env/setup.sh
         manage_sonar_update.py
         